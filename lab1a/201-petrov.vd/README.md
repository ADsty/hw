# Лабораторная работа № 1а
Реализация TCP чата на блокирующих сокетах

# Требования к протоколу
1) Пользователь может отправлять сообщения только от своего имени
2) Время в сообщении должно соответствовать реальному времени отправления сообщения
3) Пользователи разных временных зон должны видеть корректное для себя время

# Требования к ПО
1) ПО имеет консольный интерфейс
2) Прямое использование TCP сокетов (без дополнительных абстракций)
3) К одному серверу может подключаться множество клиентов
4) Отправляемое сообщение отображается у каждого подключенного в этот момент клиента
5) Своевременное отображение нового сообщения (действия на клиенте не блокируют получение сообщения)
6) Всем пользователям приходит уведомление о подключении/отключении очередного пользователя
7) Возможность отправить сообщение со вложенным файлом

# Описание протокола

Формат сообщений от сервера к клиенту:

1 байт         | 1 байт                  | 1 байт                       | до 255 байт | до 255 байт | 1 байт                    | до 255 байт   | до 2^2048 байт |
-------------- | ----------------------- | ---------------------------- | ----------- | ----------- | ------------------------- | ------------- | -------------- |
тип сообщения  | длинна времени (в байт) | длинна имени отпр. ( в байт) | время       | имя отпр.   | кол-во байт длинны данных | длинна данных | данные         |

Есть два формата сообщений от клиента к серверу. Первый используется для всех сообщений кроме файлов:

1 байт         | 1 байт                  | 1 байт                       | до 255 байт | до 255 байт | 1 байт                    | до 255 байт   | до 2^2048 байт |
-------------- | ----------------------- | ---------------------------- | ----------- | ----------- | ------------------------- | ------------- | -------------- |
тип сообщения  | длинна времени (в байт) | длинна имени отпр. ( в байт) | время       | имя отпр.   | кол-во байт длинны данных | длинна данных | данные         |

Формат для файлов идентичен по структуре первому, однако в поле данных происходят изменения:

1 байт         | 1 байт                  | 1 байт                       | до 255 байт | до 255 байт | 1 байт                    | до 255 байт   | 1 байт                | от 1 до 255 байт | от 2^2048 - 2 байт до 2^2048 - 256 байт |
-------------- | ----------------------- | ---------------------------- | ----------- | ----------- | ------------------------- | ------------- | --------------------- | ---------------- | --------------------------------------- |
тип сообщения  | длинна времени (в байт) | длинна имени отпр. ( в байт) | время       | имя отпр.   | кол-во байт длинны данных | длинна данных | длинна названия файла | название файла   | содержимое файла                        |

# Инструкция для использования

Сервер запускается командой python server_blocking.py --ip (по умолчанию 0.0.0.0) --port (по умолчанию 2000)

Клиент запускается командой python client_blocking.py --ip (ip адрес сервера) --port (порт сервера)